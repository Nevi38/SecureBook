{"ast":null,"code":"var _s = $RefreshSig$();\nimport io from 'socket.io-client';\nimport { useUserContext } from '../contexts/UserContext.js';\nimport { useEffect } from 'react';\nconst socket = io(process.env.REACT_APP_SERVER_SOCKET, {\n  transports: [\"websocket\"]\n});\n\n/*\r\n      \r\n    Dòng này để fix lỗi: Load lại trang dẫn tới mất danh sách chat\r\n      \r\n      [Problem] \r\n        + Khi load lại trang socket trước bị mất kết nối và sau đó kết nối lại (socket id được làm mới)\r\n        + Bên phía server cũng nhận được tín hiệu (connection)\r\n        + getContacts (server) chỉ gửi danh sách chat đến socket id được thêm từ 'add-user'\r\n        \r\n        => Do đó bên server không tìm được socket.id nào\r\n\r\n      [Fix] Thêm socket.id mỗi khi kết nối\r\n    \r\n*/\n\nfunction ConnectSocket() {\n  _s();\n  const {\n    user\n  } = useUserContext();\n  useEffect(() => {\n    console.log(user);\n    // if (user) {\n    //   socket.emit('add-user', user._id)\n    // }\n  }, []);\n}\n_s(ConnectSocket, \"fX5tmESiqUhCHzC3h9w4GajsYh8=\", false, function () {\n  return [useUserContext];\n});\n_c = ConnectSocket;\nConnectSocket();\nexport default socket;\nvar _c;\n$RefreshReg$(_c, \"ConnectSocket\");","map":{"version":3,"names":["io","useUserContext","useEffect","socket","process","env","REACT_APP_SERVER_SOCKET","transports","ConnectSocket","_s","user","console","log","_c","$RefreshReg$"],"sources":["C:/Users/quoct/Data/Projects/secure-book-v2/client/src/socket/socket-client.js"],"sourcesContent":["import io from 'socket.io-client'\r\nimport { useUserContext } from '../contexts/UserContext.js'\r\nimport { useEffect } from 'react';\r\n\r\nconst socket = io(process.env.REACT_APP_SERVER_SOCKET, { transports: [\"websocket\"] });\r\n\r\n/*\r\n      \r\n    Dòng này để fix lỗi: Load lại trang dẫn tới mất danh sách chat\r\n      \r\n      [Problem] \r\n        + Khi load lại trang socket trước bị mất kết nối và sau đó kết nối lại (socket id được làm mới)\r\n        + Bên phía server cũng nhận được tín hiệu (connection)\r\n        + getContacts (server) chỉ gửi danh sách chat đến socket id được thêm từ 'add-user'\r\n        \r\n        => Do đó bên server không tìm được socket.id nào\r\n\r\n      [Fix] Thêm socket.id mỗi khi kết nối\r\n    \r\n*/\r\n\r\nfunction ConnectSocket() {\r\n  const { user } = useUserContext();\r\n\r\n  useEffect(() => {\r\n    console.log(user)\r\n    // if (user) {\r\n    //   socket.emit('add-user', user._id)\r\n    // }\r\n  }, []) \r\n}\r\n\r\nConnectSocket()\r\n\r\nexport default socket"],"mappings":";AAAA,OAAOA,EAAE,MAAM,kBAAkB;AACjC,SAASC,cAAc,QAAQ,4BAA4B;AAC3D,SAASC,SAAS,QAAQ,OAAO;AAEjC,MAAMC,MAAM,GAAGH,EAAE,CAACI,OAAO,CAACC,GAAG,CAACC,uBAAuB,EAAE;EAAEC,UAAU,EAAE,CAAC,WAAW;AAAE,CAAC,CAAC;;AAErF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASC,aAAaA,CAAA,EAAG;EAAAC,EAAA;EACvB,MAAM;IAAEC;EAAK,CAAC,GAAGT,cAAc,CAAC,CAAC;EAEjCC,SAAS,CAAC,MAAM;IACdS,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;IACjB;IACA;IACA;EACF,CAAC,EAAE,EAAE,CAAC;AACR;AAACD,EAAA,CATQD,aAAa;EAAA,QACHP,cAAc;AAAA;AAAAY,EAAA,GADxBL,aAAa;AAWtBA,aAAa,CAAC,CAAC;AAEf,eAAeL,MAAM;AAAA,IAAAU,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}